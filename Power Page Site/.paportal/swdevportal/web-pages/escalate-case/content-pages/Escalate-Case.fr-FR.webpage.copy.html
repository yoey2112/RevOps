{% if user %} {% fetchxml queue_lookup %}
<fetch top="1">
  <entity name="queue">
    <attribute name="queueid" />
    <attribute name="name" />
    <filter>
      <condition attribute="name" operator="eq" value="TSS Management" />
    </filter>
  </entity>
</fetch>
{% endfetchxml %} {% assign queue_id = queue_lookup.results.entities[0].queueid %} {% assign queue_name = queue_lookup.results.entities[0].name %} 

<style>
  header, .navbar, .site-header {
    position: sticky !important;
    top: 0 !important;
    z-index: 9999 !important;
    background: #fff !important;
  }

  main, .page-content, .entityform, .entity-form, .form-container {
    padding-top: 90px !important;
  }

  body, html {
    overflow-x: hidden;
    overflow-y: auto;
  }

  tr.queue-hidden, td.queue-hidden {
    display: none !important;
  }
</style>

{% entityform name: 'Create Case - Complain about a Case' %}

<script>
  $(function () {
    var id   = "{{ queue_id   | escape }}";
    var name = "{{ queue_name | escape }}";

    if (!id) {
      return;
    }

    function fillAndHide() {
      var $lookup = $("#revops_queue");

      if (!$lookup.length) {
        return setTimeout(fillAndHide, 200);
      }
      $lookup.val(id).attr("value", id).trigger("change");
      $("#revops_queue_name").val(name).attr("value", name);
      $("#revops_queue_entityname").val("queue").attr("value", "queue");

      var $row = $lookup.closest("tr");
      if ($row.length) {
        $row.addClass("queue-hidden");
      } else {
        $lookup.closest("td, div.form-group, div.control").addClass("queue-hidden");
      }
    }
    setTimeout(fillAndHide, 400);
  });
</script>

{% else %}
<div style="padding:40px;text-align:center;">
  <h3>Veuillez vous connecter pour escalader un billet</h3>
  <a href="/SignIn" class="btn btn-primary">Sign In</a>
</div>
{% endif %}

<div class="row sectionBlockLayout text-start" style="display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;">
  <div class="container" style="padding: 0px; display: flex; flex-wrap: wrap;">
    <div class="col-lg-12 columnBlockLayout" style="flex-grow: 1; display: flex; flex-direction: column; min-width: 250px;"></div>
  </div>
</div>
