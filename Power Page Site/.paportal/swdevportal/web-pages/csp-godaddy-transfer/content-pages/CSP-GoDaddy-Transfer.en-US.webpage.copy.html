<div class="row sectionBlockLayout text-start" style="display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;">
  <div class="container" style="display: flex; flex-wrap: wrap;">
    <div class="col-lg-12 columnBlockLayout" style="flex-grow: 1; display: flex; flex-direction: column; min-width: 250px; padding: 16px; margin: 60px 0px;">
      <div id="csp-consent-panel" class="csp-consent-panel" style="padding: 20px 40px; margin-bottom: 30px;">
        <h2>Office 365 GoDaddy Defederated CSP Transfer</h2>
        <p><strong>What is an Office 365 GoDaddy Defederated CSP Transfer?</strong></p>
        <p>This process defederates a GoDaddy Office 365 tenant, which will then allow us to establish a CSP relationship and provision licenses. This process will avoid the need to perform a full (and often complex) Office 365 tenant-to-tenant migration.</p>
        <div style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-bottom: 20px;">
          <p><strong>IMPORTANT</strong> - This form is not to be used for the new mid-term NCE CSP Transfer procedure recently made available by Microsoft. This procedure is being finalized by our team. We'll update this page as soon as this is available to use.</p>
          <p style="margin-bottom: 0;">You can still use this form for assistance in linking a tenant to an organization in your Sherweb Partner Portal and you can continue to process CSP Transfers in the existing way (adding new subscriptions with Sherweb, cancelling/expiring with existing CSP), but these requests should not be used for mid-term NCE transfers.</p>
        </div>

        <h3>Before proceeding, please confirm the following:</h3>

        <div style="margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 4px;">
          <p style="margin-bottom: 10px;"><strong>NCE Enforcement Policy:</strong></p>
          <p>Due to Microsoft's NCE enforcement policy, Sherweb will no longer be adding licenses on your behalf as part of this CSP transfer.</p>
          <p>For all organizations, we will link the Microsoft tenant to the Cumulus organization specified below, and disable Sherweb's License Management feature to allow the licenses to provision to the destination tenant.</p>
          <p>For Academic, Non-Profit or GCC organizations, we will also add the Segment Activation offer to enable the offer families in the organization.</p>
          <p style="margin-bottom: 0;"><em>With this change, you will now be responsible for the purchase/cancellation of the licenses.</em></p>
          <label style="display: block; margin-top: 15px; font-size: 16px;">
            <input type="checkbox" id="csp-nce-policy-checkbox" style="margin-right: 8px;" />
            I understand and wish to proceed.
          </label>
        </div>

        <h3>Also ensure:</h3>
        <ul>
          <li>The Organization is created in your Sherweb Cumulus Portal</li>
          <li>The Profile section is completed</li>
          <li>The Microsoft Customer Agreement is signed (located in Platform Settings)</li>
          <li>You have the Default Global Admin user account credentials for your GoDaddy Office 365 tenant</li>
        </ul>
        <p><strong>If you do NOT have the Default Global Admin Credentials:</strong></p>
        <ul>
          <li>If you have access to another Office 365 Admin account, follow <a href="https://helpdesk.sherweb.com/en-us/knowledge-base/articles/KA-04616" target="_blank">this guide</a>.</li>
          <li>If you do NOT have any Office 365 Admin account, follow <a href="https://helpdesk.sherweb.com/en-us/knowledge-base/articles/KA-04607" target="_blank">this guide</a>.</li>
        </ul>
        <h3>Important notes:</h3>
        <ul>
          <li>New requests will be taken in approximately 7 business days.</li>
          <li>Users will need to reset their passwords at the end of the transfer.</li>
          <li>The primary domain prefix (<code>NETORG######.onmicrosoft.com</code>) cannot be changed; however, it is now possible to add additional domain prefixes to a tenant, with the ability to rename SharePoint sites.</li>
          <li>
            There are some limitations. Please refer to the Microsoft documentation below for more information:
            <ul>
              <li><a href="https://docs.microsoft.com/en-us/sharepoint/change-your-sharepoint-domain-name" target="_blank">Change your SharePoint domain name</a></li>
              <li><a href="https://docs.microsoft.com/en-us/sharepoint/troubleshoot/administration/domain-rename-faq" target="_blank">Domain rename FAQ</a></li>
            </ul>
          </li>
        </ul>
        <div class="csp-consent-actions" style="margin-top: 30px;">
          <div style="margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 4px;">
            <label style="display: block; font-size: 16px;">
              <input type="checkbox" id="csp-consent-checkbox" style="margin-right: 8px;" />
              I have read and agree to the information above, and I am ready to submit a CSP GoDaddy transfer request.
            </label>
          </div>
          <button id="csp-consent-continue" disabled="" style="background-color: #ff6600; color: white; border: none; padding: 12px 32px; font-size: 16px; font-weight: bold; border-radius: 4px; cursor: pointer; transition: background-color 0.3s;">Continue to request form</button>
        </div>
      </div>

      <div id="csp-form-panel" style="display: none;">{% entityform name: 'CSP GoDaddy Transfer' %}</div>
    </div>
  </div>
</div>

{% fetchxml orgsQuery %}
<fetch>
  <entity name="revops_cumulusorganization">
    <attribute name="revops_cumulusorganizationid" />
    <attribute name="revops_name" />
    <link-entity name="revops_cumulusaccount" from="revops_cumulusaccountid" to="revops_cumulusaccount" link-type="outer" alias="account">
      <attribute name="revops_cumulusaccountid" />
      <attribute name="revops_name" />
    </link-entity>
    <filter type="and">
      <condition attribute="statecode" operator="eq" value="0" />
    </filter>
    <order attribute="revops_name" descending="false" />
  </entity>
</fetch>
{% endfetchxml %} {% fetchxml accountsQuery %}
<fetch top="5000">
  <entity name="revops_cumulusaccount">
    <attribute name="revops_cumulusaccountid" />
    <attribute name="revops_name" />
    <filter>
      <condition attribute="statecode" operator="eq" value="0" />
    </filter>
  </entity>
</fetch>
{% endfetchxml %} {% fetchxml subjectQuery %}
<fetch top="1">
  <entity name="subject">
    <attribute name="subjectid" />
    <attribute name="title" />
    <filter>
      <condition attribute="title" operator="eq" value="CSP - GoDaddy" />
    </filter>
  </entity>
</fetch>
{% endfetchxml %} {% fetchxml serviceQuery %}
<fetch top="1">
  <entity name="revops_service">
    <attribute name="revops_serviceid" />
    <attribute name="revops_name" />
    <filter>
      <condition attribute="revops_name" operator="eq" value="Microsoft 365" />
    </filter>
  </entity>
</fetch>
{% endfetchxml %} {% fetchxml queueQuery %}
<fetch top="1">
  <entity name="queue">
    <attribute name="queueid" />
    <attribute name="name" />
    <filter>
      <condition attribute="name" operator="eq" value="Technical Onboarding" />
    </filter>
  </entity>
</fetch>
{% endfetchxml %}

<script id="godaddy-orgs-data" type="application/json">
  [
    {% assign orgs = orgsQuery.results.entities %}
    {% for org in orgs %}
    {
      "id": "{{ org.revops_cumulusorganizationid }}",
      "name": "{{ org.revops_name | escape }}",
      "cumulusAccountId": "{{ org['account.revops_cumulusaccountid'] }}",
      "cumulusAccountName": "{{ org['account.revops_name'] | escape }}"
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
</script>

<script id="godaddy-accounts-data" type="application/json">
  [
    {% assign accounts = accountsQuery.results.entities %}
    {% for account in accounts %}
    {
      "id": "{{ account.revops_cumulusaccountid }}",
      "name": "{{ account.revops_name | escape }}"
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
</script>

<script id="godaddy-config-data" type="application/json">
  {
    "subjectId": "{% if subjectQuery.results.entities.size > 0 %}{{ subjectQuery.results.entities[0].subjectid }}{% endif %}",
    "subjectName": "{% if subjectQuery.results.entities.size > 0 %}{{ subjectQuery.results.entities[0].title }}{% endif %}",
    "serviceId": "{% if serviceQuery.results.entities.size > 0 %}{{ serviceQuery.results.entities[0].revops_serviceid }}{% endif %}",
    "serviceName": "{% if serviceQuery.results.entities.size > 0 %}{{ serviceQuery.results.entities[0].revops_name }}{% endif %}",
    "queueId": "{% if queueQuery.results.entities.size > 0 %}{{ queueQuery.results.entities[0].queueid }}{% endif %}",
    "queueName": "{% if queueQuery.results.entities.size > 0 %}{{ queueQuery.results.entities[0].name }}{% endif %}"
  }
</script>
