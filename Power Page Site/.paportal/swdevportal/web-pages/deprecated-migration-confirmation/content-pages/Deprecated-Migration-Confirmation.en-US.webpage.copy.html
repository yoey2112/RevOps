{% comment %} ============================================================================= MIGRATION CONFIRMATION - HYBRID APPROACH ============================================================================= This page is Step 3 of a 3-page migration request flow: 1. new-migration-request.html (creates Case using entityform) 2. migration-details-hybrid.html (creates Transfer using Liquid) 3. migration-confirmation.html (displays success message - THIS PAGE) This page expects Case ID and Transfer ID in URL parameters: ?caseid=xxxxx&transferid=yyyyy ============================================================================= {% endcomment %} {% comment %}=== GET PARAMETERS FROM URL ==={% endcomment %} {% assign caseId = request.params.caseid %} {% assign transferId = request.params.transferid %} {% comment %}=== VALIDATE PARAMETERS ==={% endcomment %} {% if caseId == null or caseId == '' or transferId == null or transferId == '' %}
<div class="alert alert-danger" role="alert">
  <h3>Error: Missing Information</h3>
  <p>This page requires Case ID and Transfer ID from the previous step. Please <a href="/new-migration-request">start from the beginning</a>.</p>
</div>
{% else %} {% comment %}=== FETCH CASE DETAILS ==={% endcomment %} {% fetchxml caseQuery %}
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">
  <entity name="incident">
    <attribute name="incidentid" />
    <attribute name="ticketnumber" />
    <attribute name="title" />
    <attribute name="emailaddress" />
    <attribute name="createdon" />
    <attribute name="customerid" />
    <attribute name="customeridname" />
    <filter type="and">
      <condition attribute="incidentid" operator="eq" value="{{ caseId }}" />
    </filter>
  </entity>
</fetch>
{% endfetchxml %} {% assign case = caseQuery.results.entities[0] %} {% comment %}=== FETCH TRANSFER DETAILS ==={% endcomment %} {% fetchxml transferQuery %}
<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">
  <entity name="revops_transfer">
    <attribute name="revops_transferid" />
    <attribute name="revops_name" />
    <attribute name="revops_migrationprimarydomain" />
    <attribute name="revops_migrationotherdomains" />
    <attribute name="revops_generalmigrationtype" />
    <attribute name="revops_generalmigrationtypename" />
    <attribute name="revops_sourceprovider" />
    <attribute name="revops_sourceprovidername" />
    <attribute name="revops_sourceprotocol" />
    <attribute name="revops_sourceprotocolname" />
    <attribute name="revops_sourceprotocolother" />
    <attribute name="revops_sourceproviderother" />
    <attribute name="revops_migrationdestinationenvironment" />
    <attribute name="revops_migrationdestinationenvironmentname" />
    <attribute name="revops_migrationoffice365initialdomainprefix" />
    <attribute name="revops_migrationnumberofmailboxes" />
    <attribute name="revops_migrationlicensing" />
    <attribute name="createdon" />
    <filter type="and">
      <condition attribute="revops_transferid" operator="eq" value="{{ transferId }}" />
    </filter>
  </entity>
</fetch>
{% endfetchxml %} {% assign transfer = transferQuery.results.entities[0] %} {% if case == null or transfer == null %}
<div class="alert alert-danger" role="alert">
  <h3>Error: Records Not Found</h3>
  <p>The specified Case or Transfer could not be found. Please <a href="/new-migration-request">start from the beginning</a>.</p>
</div>
{% else %} {% comment %}=== DISPLAY SUCCESS MESSAGE ==={% endcomment %}
<style>
  .confirmation-container {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    max-width: 900px;
    margin: 2rem auto;
    padding: 2rem;
  }

  .success-banner {
    background-color: #d4edda;
    border-left: 5px solid #28a745;
    padding: 1.5rem;
    margin-bottom: 2rem;
    border-radius: 4px;
  }

  .success-banner h2 {
    color: #155724;
    font-size: 1.75rem;
    margin: 0 0 0.5rem 0;
    display: flex;
    align-items: center;
  }

  .success-banner h2::before {
    content: "âœ“";
    display: inline-block;
    width: 40px;
    height: 40px;
    background-color: #28a745;
    color: white;
    border-radius: 50%;
    text-align: center;
    line-height: 40px;
    font-size: 1.5rem;
    margin-right: 1rem;
    font-weight: bold;
  }

  .success-banner p {
    color: #155724;
    font-size: 1rem;
    margin: 0;
  }

  .info-section {
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .info-section h3 {
    color: #0078d4;
    font-size: 1.25rem;
    margin: 0 0 1rem 0;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #0078d4;
  }

  .info-row {
    display: flex;
    margin-bottom: 0.75rem;
    line-height: 1.6;
  }

  .info-row:last-child {
    margin-bottom: 0;
  }

  .info-label {
    font-weight: 600;
    color: #495057;
    min-width: 200px;
    flex-shrink: 0;
  }

  .info-value {
    color: #212529;
    flex-grow: 1;
    word-break: break-word;
  }

  .case-number {
    font-size: 1.5rem;
    font-weight: bold;
    color: #0078d4;
  }

  .next-steps {
    background-color: #e6f4ff;
    border-left: 4px solid #0078d4;
    padding: 1.5rem;
    margin-top: 2rem;
    border-radius: 4px;
  }

  .next-steps h3 {
    color: #0078d4;
    font-size: 1.25rem;
    margin: 0 0 1rem 0;
  }

  .next-steps ul {
    margin: 0;
    padding-left: 1.5rem;
  }

  .next-steps li {
    margin-bottom: 0.5rem;
    line-height: 1.6;
  }

  .action-buttons {
    margin-top: 2rem;
    display: flex;
    gap: 1rem;
  }

  .btn {
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    font-weight: 600;
    border-radius: 4px;
    text-decoration: none;
    display: inline-block;
    cursor: pointer;
    border: none;
    transition: background-color 0.2s;
  }

  .btn-primary {
    background-color: #0078d4;
    color: white;
  }

  .btn-primary:hover {
    background-color: #106ebe;
    color: white;
  }

  .btn-secondary {
    background-color: #6c757d;
    color: white;
  }

  .btn-secondary:hover {
    background-color: #545b62;
    color: white;
  }
</style>

<div class="row sectionBlockLayout text-start" style="display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;">
  <div class="container" style="display: flex; flex-wrap: wrap;">
    <div class="col-lg-12 columnBlockLayout" style="flex-grow: 1; display: flex; flex-direction: column; min-width: 250px; padding: 16px; margin: 60px 0px;">
      <div class="confirmation-container">
        {% comment %}=== Success Banner ==={% endcomment %}
        <div class="success-banner">
          <h2>Migration Request Submitted Successfully!</h2>
          <p>Your migration request has been created and assigned to our Technical Onboarding team.</p>
        </div>

        {% comment %}=== Case Information ==={% endcomment %}
        <div class="info-section">
          <h3>ðŸ“‹ Case Information</h3>
          <div class="info-row">
            <span class="info-label">Case Number:</span>
            <span class="info-value case-number">{{ case.ticketnumber }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Title:</span>
            <span class="info-value">{{ case.title }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Contact Email:</span>
            <span class="info-value">{{ case.emailaddress }}</span>
          </div>
          {% if case.customeridname %}
          <div class="info-row">
            <span class="info-label">Organization:</span>
            <span class="info-value">{{ case.customeridname }}</span>
          </div>
          {% endif %}
          <div class="info-row">
            <span class="info-label">Submitted On:</span>
            <span class="info-value">{{ case.createdon | date: "%B %d, %Y at %I:%M %p" }}</span>
          </div>
        </div>

        {% comment %}=== Transfer Information ==={% endcomment %}
        <div class="info-section">
          <h3>ðŸ”„ Transfer Details</h3>
          <div class="info-row">
            <span class="info-label">Transfer Name:</span>
            <span class="info-value">{{ transfer.revops_name }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Primary Domain:</span>
            <span class="info-value">{{ transfer.revops_migrationprimarydomain }}</span>
          </div>
          {% if transfer.revops_migrationotherdomains %}
          <div class="info-row">
            <span class="info-label">Other Domains:</span>
            <span class="info-value">{{ transfer.revops_migrationotherdomains }}</span>
          </div>
          {% endif %}
          <div class="info-row">
            <span class="info-label">Migration Type:</span>
            <span class="info-value">{{ transfer.revops_generalmigrationtypename }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Source Provider:</span>
            <span class="info-value"> {{ transfer.revops_sourceprovidername }} {% if transfer.revops_sourceproviderother %}({{ transfer.revops_sourceproviderother }}){% endif %} </span>
          </div>
          <div class="info-row">
            <span class="info-label">Source Protocol:</span>
            <span class="info-value"> {{ transfer.revops_sourceprotocolname }} {% if transfer.revops_sourceprotocolother %}({{ transfer.revops_sourceprotocolother }}){% endif %} </span>
          </div>
          <div class="info-row">
            <span class="info-label">Destination Environment:</span>
            <span class="info-value">{{ transfer.revops_migrationdestinationenvironmentname }}</span>
          </div>
          {% if transfer.revops_migrationoffice365initialdomainprefix %}
          <div class="info-row">
            <span class="info-label">Office 365 Domain:</span>
            <span class="info-value">{{ transfer.revops_migrationoffice365initialdomainprefix }}</span>
          </div>
          {% endif %}
          <div class="info-row">
            <span class="info-label">Number of Mailboxes:</span>
            <span class="info-value">{{ transfer.revops_migrationnumberofmailboxes }}</span>
          </div>
          {% if transfer.revops_migrationlicensing %}
          <div class="info-row">
            <span class="info-label">Licensing Details:</span>
            <span class="info-value">{{ transfer.revops_migrationlicensing }}</span>
          </div>
          {% endif %}
          <div class="info-row">
            <span class="info-label">Created On:</span>
            <span class="info-value">{{ transfer.createdon | date: "%B %d, %Y at %I:%M %p" }}</span>
          </div>
        </div>

        {% comment %}=== Next Steps ==={% endcomment %}
        <div class="next-steps">
          <h3>ðŸ“Œ What Happens Next?</h3>
          <ul>
            <li><strong>Email Notification:</strong> You will receive a confirmation email at {{ case.emailaddress }} with your case number.</li>
            <li><strong>Technical Review:</strong> Our Technical Onboarding team will review your migration request within approximately 7 business days.</li>
            <li><strong>Assignment:</strong> A migration technician will be assigned to your case and will contact you with next steps.</li>
            <li><strong>Questions?</strong> If you have any questions, please reach out to your account manager and reference Case Number <strong>{{ case.ticketnumber }}</strong>.</li>
          </ul>
        </div>

        {% comment %}=== Action Buttons ==={% endcomment %}
        <div class="action-buttons">
          <a href="/new-migration-request" class="btn btn-primary">Submit Another Migration Request</a>
          <a href="/" class="btn btn-secondary">Return to Home</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %} {% endif %}
<div class="row sectionBlockLayout text-start" style="display: flex; flex-wrap: wrap; margin: 0px; min-height: auto; padding: 8px;">
  <div class="container" style="padding: 0px; display: flex; flex-wrap: wrap;"><div class="col-lg-12 columnBlockLayout" style="flex-grow: 1; display: flex; flex-direction: column; min-width: 250px;"></div></div>
</div>
