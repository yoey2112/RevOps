function filterLosingOrg(executionContext) {
    var formContext = executionContext.getFormContext();
    var lookupLAccount = formContext.getAttribute("revops_losingaccount").getValue();

    // Ensure a value has been selected in the losing account lookup
    if (lookupLAccount != null && lookupLAccount.length > 0) {
        // Extract GUID and remove curly braces if present
        var lookupLAccountId = lookupLAccount[0].id.replace('{', '').replace('}', ''); 
        
        // Get the losing organization lookup control
        var lookupLOrg = formContext.getControl("revops_losingorg");
        
        // Apply the filter to the losing organization lookup
        lookupLOrg.addPreSearch(function () {
            var filter = "<filter type='and'><condition attribute='revops_cumulusaccount' operator='eq' value='" + lookupLAccountId + "' /></filter>";
            lookupLOrg.addCustomFilter(filter);
        });
    }
}